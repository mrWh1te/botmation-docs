---
title: Twitter
---

## Overview

These functions focus on Twitter's web app, at mobile dimensions. Here is a working [example](https://github.com/mrWh1te/Botmation/blob/master/apps/bot-twitter).


## Install

In addition to installing [@botmation/core](/install), install [@botmation/twitter](https://www.npmjs.com/package/@botmation/twitter):
```bash
npm i -s @botmation/twitter
```

All BotActions, URLs and selectors listed on this page, are exported by that package.

## Navigation

These BotActions focus on changing the URL of the Puppeteer page to specific locations within Twitters's web app.

### goToHome

```typescript
const goToHome: BotAction =
    goTo(TWITTER_URL_HOME, {waitUntil: 'load'})
```

### goToTweet

```typescript
const goToTweet =
    goTo(TWITTER_URL_TWEET, {waitUntil: 'load'})
```

### goToExplore

```typescript
const goToExplore =
    goTo(TWITTER_URL_EXPLORE, {waitUntil: 'load'})
```

### goToNotifications

```typescript
const goToNotifications =
    goTo(TWITTER_URL_NOTIFICATIONS, {waitUntil: 'load'})
```

### goToMessages

```typescript
const goToMessages =
    goTo(TWITTER_URL_MESSAGES, {waitUntil: 'load'})
```

### goToBookmarks

```typescript
const goToBookmarks =
    goTo(TWITTER_URL_BOOKMARKS, {waitUntil: 'load'})
```

### goToSettings

```typescript
const goToSettings =
    goTo(TWITTER_URL_SETTINGS, {waitUntil: 'load'})
```

### goToLogin

```typescript
const goToLogin =
    goTo(TWITTER_URL_LOGIN)
```

### goToLogout

```typescript
const goToLogout =
    goTo(TWITTER_URL_LOGOUT)
```

## Auth

These BotAction's facilitate the login process of Twitter's web app.

### login()
```typescript
const login = ({username, password}: {username: string, password: string}): BotAction =>
  chain(
    errors('Twitter login()')(
      goToLogin,
      click(FORM_AUTH_USERNAME_INPUT_SELECTOR),
      type(username),
      click(FORM_AUTH_PASSWORD_INPUT_SELECTOR),
      type(password),
      clickText('Log in'),
      waitForNavigation,
      log('Login Complete')
    )
  )
```
This BotAction is a composition that uses [errors()()](/api/errors#errors) to wrap the main assembled BotAction's, in case something goes wrong here, dev's will have an easier time knowing if errors are thrown here.

The composition is declarative, therefore needs little explaining. `login()` is a higher-order function that takes a typed object for the `username` and `password`.

### isGuest
```typescript
const isGuest: ConditionalBotAction = pipe()(
  getCookies(),
  map(cookies => cookies.find(cookie => cookie.name === 'auth_token') ? false : true)
)
```
This BotAction is a composition that uses [indexedDBStore()()](/api/indexed-db#indexeddbstore) to assemble BotAction's with the IndexedDB Database name and Store name [injected](/topic/injects). This simply grabs the value for the `users.viewerId` key then [maps](/api/pipe#map) it to the corresponding boolean value.

### isLoggedIn
```typescript
const isLoggedIn: ConditionalBotAction = pipe()(
  getCookies(),
  map(cookies => cookies.find(cookie => cookie.name === 'auth_token') ? true : false)
)
```
This BotAction is a composition that uses [indexedDBStore()()](/api/indexed-db#indexeddbstore) to assemble BotAction's with the IndexedDB Database name and Store name [injected](/topic/injects). This simply grabs the value for the `users.viewerId` key then [maps](/api/pipe#map) it to the corresponding boolean value.

### logout

This function deletes cookies and local storage that include the user's session information, to effect a logout, upon page reload.

```typescript
const logout: BotAction = chain(
  goToLogout,
  clickText('Log out'),
  waitForNavigation
)
```

## Feed

These BotActions interact with the popular Twitter feature: Feed.

### tweet

This BotAction will tweet the message given.

```typescript
const tweet = (message: string): BotAction => chain(
  goToTweet,
  wait(1200),
  click(FORM_TWEET_TEXTAREA),
  type(message),
  clickText('Tweet'),
  waitForNavigation
)
```

## Selectors

Helpful HTML element selectors in the Twitter web app that can be imported directly from twitter package.

```typescript
const FORM_AUTH_USERNAME_INPUT_SELECTOR = 'form input[name="session[username_or_email]"]'
const FORM_AUTH_PASSWORD_INPUT_SELECTOR = 'form input[name="session[password]"]'

const FORM_TWEET_TEXTAREA = '.DraftEditor-root'
```

## URLs

URLs for the main pages of the Twitter web app.

```typescript
const TWITTER_URL_BASE = 'https://www.twitter.com/'

const TWITTER_URL_HOME = TWITTER_URL_BASE + 'home'
const TWITTER_URL_TWEET = TWITTER_URL_BASE + 'compose/tweet'
const TWITTER_URL_EXPLORE = TWITTER_URL_BASE + 'explore'
const TWITTER_URL_NOTIFICATIONS = TWITTER_URL_BASE + 'notifications'
const TWITTER_URL_MESSAGES = TWITTER_URL_BASE + 'messages'
const TWITTER_URL_BOOKMARKS = TWITTER_URL_BASE + 'i/bookmarks'

const TWITTER_URL_SETTINGS = TWITTER_URL_BASE + 'settings'

const TWITTER_URL_LOGIN = TWITTER_URL_BASE + 'login'
const TWITTER_URL_LOGOUT = TWITTER_URL_BASE + 'logout'
```